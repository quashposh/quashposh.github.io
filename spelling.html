<!doctype html>
<html>
<head>
<link rel="icon" type="image/png" href="Images/favicon.png" />
<link type="text/css" rel="stylesheet"
href="css/My-first-stylesheet.CSS"/>
<title>PHS Spelling</title>
<h1>SPELLING 2020!!!</h1>
<P><strong>By Hayden</strong></p>
<p><strong>Styled By JOSH!!!
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<script>
// get all voices that browser offers
var available_voices = window.speechSynthesis.getVoices();

// this will hold an english voice
var english_voice = '';

function chooseVoice() {
	// find voice by language locale "en-US"
	// if not then select the first voice
	for(var i=0; i<available_voices.length; i++) {
		if(available_voices[i].lang === 'en-US') {
			english_voice = available_voices[i];
			break;
		}
	}
	if(english_voice === '')
		english_voice = available_voices[0];
}

// list of languages is probably not loaded, wait for it
if(available_voices.length == 0) {
	window.speechSynthesis.addEventListener('voiceschanged', function() {
		available_voices = window.speechSynthesis.getVoices();
		chooseVoice();
	});
} else {
	chooseVoice();
}

function textToSpeech(text) {
	// new SpeechSynthesisUtterance object
	var utter = new SpeechSynthesisUtterance();
	utter.rate = 1;
	utter.pitch = 0.5;
	utter.text = text;
	utter.voice = english_voice;

	// speak
	window.speechSynthesis.speak(utter);
}

var rooms = [ 'Room 7', 'Room 20' ];
var words = [ [
	[ 'blue', 'blow', 'club', 'clap', 'fly', 'glad', 'glow', 'play', 'plan', 'slip'],
	[ 'me', 'my', 'mum', 'no', 'on', 'put', 'quiz', 'run', 'said', 'to' ],
	[ 'up', 'us', 'van', 'we', 'went', 'will', 'was', 'box', 'yes', 'zoo' ],
	[ 'key', 'kid', 'cat', 'cut', 'crab', 'clip', 'the', 'here', 'went' ],
	], [
	[ 'environment', 'transfer', 'waste', 'fertiliser', 'transport', 'locally', 'recycle', 'compost', 'reuse', 'reduce' ],
	[ 'energy', 'pollution', 'sustainable', 'rubbish', 'plastic', 'ecology', 'manure', 'generations', 'conserve', 'hybrid' ],
	[ 'excellent', 'eagle', 'every', 'evil', 'easier', 'knee', 'sheep', 'please', 'jeans', 'eager' ],
	] ];
	
var test_word = '';
var score = 0;

function nextWord(textbox) {
	var room = parseInt(document.getElementById('room_list').value);
	var week = parseInt(document.getElementById('week_list').value);
	console.trace(room);
	console.trace(week);
	textbox.value = '';
	var test_list = words[room][week];
	var random_index = Math.floor(Math.random() * test_list.length);
	return test_list[random_index];
}

function repeatWord(textbox) {
	textToSpeech(test_word);
	textbox.focus();
}

function checkSpelling(textbox) {
	var spelling = textbox.value.trim().toLowerCase();
	if (spelling == test_word.toLowerCase()) {
		score = score+1;
		document.getElementById('score').innerText = "Score: " + score;
		document.getElementById('correct_spelling').innerText = '';
		textToSpeech('Correct! You are awesome!');
		test_word = nextWord(textbox);
	} else {
		document.getElementById('correct_spelling').innerText = test_word;
		textToSpeech('Nope! plz Try again.');
	}
	textToSpeech(test_word);
}

</script>
<body align="center">
<select id="room_list">
  <option value="0">Room 7</option>
  <option value="1">Room 20</option>
</select>
<select id="week_list">
  <option value="3">Week 1</option>
  <option value="2">Week 3</option>
  <option value="1">Week 2</option>
  <option value="0">Week 4</option>
</select>
<button id="speakButton" onclick="repeatWord(document.getElementById('spelling'))">Speak</button>
<input id="spelling" type="text"></input>
<p id="score" />
<p id="correct_spelling" />
</body>
<script>
// Execute a function when the user releases a key on the keyboard
var textbox = document.getElementById('spelling');

test_word = nextWord(textbox);

textbox.addEventListener('keyup', function(event) {
  if (event.keyCode === 13) { // Number 13 is the "Enter" key on the keyboard
    event.preventDefault(); // Cancel the default action, if needed
    checkSpelling(textbox);
  }
});
</script>
</html>